---
interface Props {
	action: string;
	title: string;
	url?: string;
	heading?: string;
	copy?: string;
}

const {
	action,
	title,
	url,
	heading = "Send a comment",
	copy = "Got a question, correction, or thought? Send it here — it goes straight to my inbox.",
} = Astro.props;
---

<section class="rb-comment" aria-label="Send a comment">
	<hr />
	<h2 class="rb-comment__title">{heading}</h2>
	<p class="rb-comment__copy">{copy}</p>

	<form class="rb-comment__form" action={action} method="POST">
		<input type="hidden" name="postTitle" value={title} />
		{url && <input type="hidden" name="postUrl" value={url} />}

		{/* Honeypot field (spam trap). Keep hidden from humans. */}
		<p class="rb-comment__honeypot" aria-hidden="true">
			<label>
				Don’t fill this out
				<input name="_gotcha" tabindex="-1" autocomplete="off" />
			</label>
		</p>

		<label class="rb-comment__label">
			Your name (optional)
			<input class="rb-comment__input" type="text" name="name" autocomplete="name" />
		</label>

		<label class="rb-comment__label">
			Your email (optional)
			<input class="rb-comment__input" type="email" name="email" autocomplete="email" />
		</label>

		<label class="rb-comment__label">
			Message
			<textarea class="rb-comment__textarea" name="message" rows={6} required></textarea>
		</label>

		<button class="rb-comment__button" type="submit">Send</button>
	</form>

	<p class="rb-comment__fineprint">
		No account required. (If you don’t hear back, check your spam folder for my reply.)
	</p>
</section>

<style>
	.rb-comment {
		margin-top: var(--s-10);
	}
	.rb-comment__title {
		margin: var(--s-6) 0 var(--s-3);
		font-size: var(--text-lg);
	}
	.rb-comment__copy {
		margin: 0 0 var(--s-5);
		color: var(--muted);
	}
	.rb-comment__form {
		display: grid;
		gap: var(--s-4);
		margin: 0;
	}
	.rb-comment__label {
		display: grid;
		gap: 0.35rem;
		font-size: var(--text-sm);
		color: rgb(var(--gray-dark));
	}
	.rb-comment__input,
	.rb-comment__textarea {
		font: inherit;
		padding: 0.6rem 0.7rem;
		border-radius: 0.6rem;
		border: 1px solid rgba(0, 0, 0, 0.15);
		background: white;
	}
	.rb-comment__textarea {
		resize: vertical;
		min-height: 8rem;
	}
	.rb-comment__button {
		justify-self: start;
		padding: 0.75rem 1rem;
		border-radius: 999px;
		border: 1px solid rgba(11, 13, 16, 0.9);
		background: var(--ink);
		color: var(--bg);
		font-weight: 700;
		line-height: 1;
		cursor: pointer;
	}
	.rb-comment__button:hover {
		filter: brightness(1.05);
	}
	.rb-comment__button:focus-visible {
		outline: 3px solid rgba(11, 13, 16, 0.35);
		outline-offset: 3px;
	}
	.rb-comment__fineprint {
		margin: var(--s-4) 0 0;
		font-size: var(--text-sm);
		color: var(--muted);
	}
	.rb-comment__honeypot {
		display: none;
	}
</style>
